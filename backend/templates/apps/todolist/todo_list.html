{% extends "layout/base.html" %}

{% block title %}Todo List{% endblock %}

{% block content %}
<h1 class="text-center">Todo List</h1>

<div class="row m-4">
    <div class="form-group pb-4">
        <a href="{% url 'todolist:todo_create' %}" class="btn btn-primary"><i class="fas fa-plus me-2"></i>Adicionar
            Tarefa</a>
    </div>
    {% for todo in todos %}
    <div class="col-lg-3 col-md-6 mb-4">
        <div class="card" style="width: 18rem;">
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>ID:</strong> {{ todo.id }}</li>
                <li class="list-group-item"><strong>Descrição:</strong> {{ todo.descricao }}</li>
                <li class="list-group-item"><strong>Data de Início:</strong> {{todo.data_inicio|date:"d/m/Y"}}</li>
                <li class="list-group-item"><strong>Data Prevista do Término:</strong>
                    {{todo.data_prevista_termino|date:"d/m/Y"}}</li>
                <li class="list-group-item"><strong>Situação:</strong> {{ todo.get_situacao_display }}</li>
            </ul>
            <div class="card-body">
                <div class="form-group justify-content-around">
                    <a href="{% url 'todolist:todo_detail' todo.id %}" class="btn btn-primary"><i
                            class="fas fa-eye"></i></a>
                    <a href="{% url 'todolist:todo_update' todo.id %}" class="btn btn-warning"><i
                            class="fas fa-edit"></i></a>
                    <a href="{% url 'todolist:todo_delete' todo.id %}" class="btn btn-danger"><i
                            class="fas fa-trash-alt"></i></a>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <strong>Nenhuma tarefa encontrada.</strong>
    {% endfor %}
    <!-- Paginação -->
    <div class="pagination justify-content-center mt-4">
        <ul class="pagination">
            {% if page_obj.has_previous %}
            <li class="page-item">
                <a href="?page=1" class="page-link">Primeira</a>
            </li>
            <li class="page-item">
                <a href="?page={{ page_obj.previous_page_number }}" class="page-link">Anterior</a>
            </li>
            {% endif %}

            {% for num in page_obj.paginator.page_range %}
            <li class="page-item {% if num == page_obj.number %}active{% endif %}">
                <a href="?page={{ num }}" class="page-link">{{ num }}</a>
            </li>
            {% endfor %}

            {% if page_obj.has_next %}
            <li class="page-item">
                <a href="?page={{ page_obj.next_page_number }}" class="page-link">Próxima</a>
            </li>
            <li class="page-item">
                <a href="?page={{ page_obj.paginator.num_pages }}" class="page-link">Última</a>
            </li>
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}